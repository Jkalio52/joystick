var c=(e="",n={})=>{throw new Error(`[joystick${e?`.${e}`:""}] ${n.message||n.reason||n}`)};var a=(e={})=>{try{return Object.entries(e).map(([n,o])=>{let[r,...t]=n.split(" ");return{type:r.toLowerCase(),selector:t.join(" "),handler:o}})}catch(n){c("component.events.serialize",n)}};var d=(e={},n=[])=>{let o=e.instance.options.events||{};if(Object.keys(o).length>0&&n.push({id:e.id,instanceId:e.instance.instanceId,events:a(o).map(t=>{let s=document.querySelectorAll(`body [js-i="${e.instance.instanceId}"] ${t.selector}`),l=document.querySelectorAll(`body [js-c="${e.id}"] ${t.selector}`);return{...t,eventListener:function(i){Object.defineProperty(i,"target",{value:i.composedPath()[0]}),t.handler(i,e.instance)},elements:s?.length>0?s:l}}),instance:e.instance}),e?.children?.length>0)for(let t=0;t<e?.children?.length;t+=1){let s=e?.children[t];d(s,n)}return n},u=()=>{let e=d(window.joystick._internal.tree,[]);for(let n=0;n<e?.length;n+=1){let o=e[n];for(let r=0;r<o?.events?.length;r+=1){let t=o.events[r];for(let s=0;s<t?.elements?.length;s+=1)t.elements[s].addEventListener(t.type,t.eventListener)}}window.joystick._internal.eventListeners=e};export{u as default};
